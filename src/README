AsmVar
==========

AsmVar is a software for discovery, genotyping and characterization of structural variants and novel sequence at single nucleotide resolution from de novo assemblies on a population scale

-------------
Preparation
#Step	                #Commands and Parameters	                                                                            #Description
#lastal and last-split	#lastal -e25 -v -q3 -j4 human_g1k_v37_decoy.fasta.lastdb $asm.fa | last-split -s35 每v >$alignment.maf	#Assembly-vs-reference alignment
#maf-convert	        #maf-convert.py 每f human_g1k_v37_decoy.repeatmask.fasta.dict sam $alignment.maf |samtools view 每bS 每o $alignment.bam	            #Convert maf alignment format to bam format for visualization of assembly-vs-reference alignment


------------
Dependency

scipy (http://www.scipy.org/)
numpy (http://www.numpy.org/)
scikit-learn (http://scikit-learn.org/stable/)
matplotlib (http://matplotlib.org/)
tabix (http://sourceforge.net/projects/samtools/files/tabix/)
#example  -zlib (http://www.zlib.net/)

-------------
Installing AsmVar

$ cd src/AsmvarDetect
$ make

One short shell ~/demo/AsmVarDetector/Test.sh can be run to check the correct installation of AsmVar, you can use it to verify that your installation is working correctly. This shell will run automatically and the output files are t.age,t4.1025.vcf,t4.1025.svd,t4.1025.summary,t4.1025.gap.bed.

-------------
Running AsmVar workflow

Please see the demo shell for analyzing the 37 human de novo assemblies in the manuscript in ~/demo/Cookbook/scripts/DemoPipelineGuideline.sh, it brings you what we actually apply the whole Asmvar pipeline to make the variants calling, genotyping, altalignment, recalibration and vqsr.
!!!Please note that it can not be run directly. We are trying to be as detailed as possible to provide some key steps of the whole Asmvar workflow, you should change some configration based on your computer environment on your data set in practice. We are very sorry and hopefully you can understand that we could not open all our date result at present. The output NA12878 files located in ~/demo/Cookbook are all generated by the whole Asmvar workflow, you can take it as reference when you run Asmvar.

There are 5 main steps about Asmvar workflow,
Step1: AsmVar Detection
Step2: AsmVar Altalignment
Step3: AsmVar Genotyping
Step4: AsmVar RecalibrationVQ
Step5: AsmVar VQSR
If you run it with the whole human genome data, please make sure that you run each steps based on each chromosomes. It will take you such long time to run it directly with whole genome dataset. Besides that, sometimes you have to merge all the output results into one file as the next step input. The separate steps may make you confused and we will improve and integrate all steps as soon as possible.


